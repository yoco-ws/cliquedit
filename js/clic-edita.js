var ClicEdita=function(e,t,a){var i={API_key:e,domain:t,LOCAL_MEDIA_HANDLER:a};return{get:function(e){if(i.hasOwnProperty(e))return i[e]},set:function(e,t){i.hasOwnProperty(e)&&(i[e]=t)},init:function(){null!=i.API_key?(console.log("Inicializando eventos de edición"),insertImageHelpers(),startNotifications(),startEventListeners(),insertContextMenu()):console.log("Debes definir la API Key en el archivo php")},notify:function(e,t){var a={body:e,icon:"success"==t?"https://yoco.ws/clic-edita/img/n_success.png":"https://yoco.ws/clic-edita/img/n_error.png"};if("Notification"in window)if("granted"===Notification.permission)new Notification("Clic Edita",a);else alert("Clic Edita\n"+a.body);else alert("Clic Edita\n"+a.body)}}};function insertImageHelpers(){$("body").append('\x3c!-- Formularios auxiliares para la subida de archivos --\x3e<form style="display:none" id="ce-image-container"><input type="file" name="ce-image" id="ce-image"></form><form style="display:none" id="ce-image-sharing-container"><input type="file" name="ce-image" id="ce-sharing-image"></form><form style="display:none" id="ce-image-video-container"><input type="file" name="ce-image" id="ce-video-image"></form><form style="display:none" data-ce-selected-subdir="audio" id="ce-audio-container"><input type="file" name="ce-audio" id="ce-audio"></form><form style="display:none" data-ce-selected-subdir="video" id="ce-video-container"><input type="file" name="ce-video" id="ce-video"></form>')}function startNotifications(){if("Notification"in window){if("granted"===Notification.permission){new Notification("Estás en clic edita",{body:"Salir",icon:"https://yoco.ws/clic-edita/img/c_logout.png"}).onclick=function(e){e.preventDefault(),window.open("/clic-edita/logout.php")}}"denied"!==Notification.permission&&"granted"!==Notification.permission&&Notification.requestPermission(function(e){})}else console.log("El navegador no soporta notificaciones")}function startEventListeners(){$(document).ready(function(){$("*[data-ce-text]").attr("contenteditable",!0),$("*[data-ce-article] a[data-ce-read-full]").click(function(e){e.preventDefault()}),$(document).on("paste","*[contenteditable]",function(e){e.preventDefault();var t=e.originalEvent.clipboardData.getData("text/plain");t=t.replace(/<div>(.*)<\/div>/g,"$1<br />"),document.execCommand("inserttext",!1,t);var a=$(this).html();console.log(a),a=(a=a.replace(/<div>/g,"")).replace(/<\/div>/g,"<br/>"),$(this).html(a)}),$("*[data-ce-text]").on("click touchstart",function(e){var t=!1,a=$(this).attr("data-ce-richtext");void 0!==a&&!1!==a&&(t=!0),$(document).trigger("TEXT_CHANGE_REQUEST",[$(this),t])}),$("*[data-ce-anchor]").click(function(e){e.preventDefault(),e.shiftKey&&$(document).trigger("ANCHOR_CHANGE_REQUEST",$(this))}),$("form#ce-image-container > input[type=file]").change(function(e){$(document).trigger("IMAGE_CHANGE_REQUEST",$("form#ce-image-container"))}),$("form#ce-image-video-container > input[type=file]").change(function(e){$(document).trigger("VIDEO_POSTER_CHANGE_REQUEST",$("form#ce-image-video-container"))}),$("form#ce-image-sharing-container > input[type=file]").change(function(e){$(document).trigger("ARTICLE_SHARINGIMAGE_CHANGE_REQUEST",$("form#ce-image-sharing-container"))}),$("form#ce-audio-container > input[type=file]").change(function(e){$(document).trigger("AUDIO_UPLOAD_CHANGE_REQUEST",$("form#ce-audio-container"))}),$("form#ce-video-container > input[type=file]").change(function(e){$(document).trigger("VIDEO_UPLOAD_CHANGE_REQUEST",$("form#ce-video-container"))}),$("label[data-ce-image]").click(function(e){if(!e.shiftKey){e.preventDefault();var t=$(this).attr("data-ce-image"),a=$(this).attr("data-subdirectory"),i=$(this).closest("[data-ce-article]").attr("data-ce-article"),c=$(this).closest("[data-ce-category]").attr("data-ce-category");void 0!==i&&!1!==i&&void 0!==c&&!1!==c||($("form#ce-image-container").removeAttr("data-ce-selected-article"),$("form#ce-image-container").removeAttr("data-ce-selected-category")),$("form#ce-image-container").attr("data-ce-selected-image",t),$("form#ce-image-container").attr("data-ce-selected-subdir",a),$("form#ce-image-container").attr("data-ce-selected-article",i),$("form#ce-image-container").attr("data-ce-selected-category",c),$("form#ce-image-container > input[type=file]").click()}})})}function insertContextMenu(){$("body").append('<div id="ce-context-menu" class="dropdown clearfix"><div class="enc-ce"><p>Clic Edita</p></div><ul role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;"></ul></div>');var e=$("div#ce-context-menu"),t=$("div#ce-context-menu ul");$("[data-ce-siblings], [data-ce-audio], [data-ce-image], [data-ce-anchor], [data-ce-video], [data-ce-article], [data-ce-text]").on("contextmenu taphold",function(a){var i;$("div#ce-context-menu ul li").remove("click"),t.html(""),a.stopPropagation(),$(this).each(function(){$.each(this.attributes,function(){this.specified&&(-1!==this.name.indexOf("data-ce-")&&(i=this.name))})}),insertMenuOptions(t,$(this),i),$(this).siblings("[data-ce-siblings], [data-ce-siblings][data-ce-audio], [data-ce-siblings][data-ce-image], [data-ce-siblings][data-ce-text], [data-ce-siblings][data-ce-anchor], [data-ce-siblings][data-ce-video]").each(function(){$.each(this.attributes,function(){this.specified&&(-1!==this.name.indexOf("data-ce-")&&(i=this.name))}),insertMenuOptions(t,$(this),i)});for(var c=$(this).parent().closest("[data-ce-siblings], [data-ce-audio], [data-ce-image], [data-ce-article], [data-ce-anchor], [data-ce-text], [data-ce-video]");c.length>0;){c.each(function(){$.each(this.attributes,function(){this.specified&&(-1!==this.name.indexOf("data-ce-")&&(i=this.name))})}),insertMenuOptions(t,c,i),c.siblings("[data-ce-siblings], [data-ce-siblings][data-ce-audio], [data-ce-siblings][data-ce-image], [data-ce-siblings][data-ce-text], [data-ce-siblings][data-ce-anchor], [data-ce-siblings][data-ce-video]").each(function(){$.each(this.attributes,function(){this.specified&&(-1!==this.name.indexOf("data-ce-")&&(i=this.name))}),insertMenuOptions(t,$(this),i)}),c=c.parent().closest("[data-ce-siblings], [data-ce-audio], [data-ce-image], [data-ce-article], [data-ce-anchor], [data-ce-video], [data-ce-text]")}return e.css({display:"block",left:a.pageX,top:a.pageY}),$("html").keydown(function(a){27==a.keyCode&&(e.hide(),$("div#ce-context-menu ul li").remove("click"),t.html(""),$("html").unbind("keydown"))}),!1}),$("html").click(function(){e.hide(),$("div#ce-context-menu ul li").remove("click"),t.html("")})}function insertMenuOptions(e,t,a){switch(a){case"data-ce-anchor":var i=$('<ul class="submenu"><div><img class="icono-ce" src="https://yoco.ws/clic-edita/img/icono-enlace.svg"></div><li><p><strong>Enlace</strong></p></li></ul>'),c=$('<li><ul class="ce-options"></ul></li>'),o=$('<li class="ce-option"><p>Editar...</p></li>').click(function(){$(document).trigger("ANCHOR_CHANGE_REQUEST",t)}),n=$('<a href="'+t.attr("href")+'"><li class="ce-option"><p>Abrir...</p></li></a>');c.children(".ce-options").append(o).append(n),i.append(c),e.append(i);break;case"data-ce-audio":i=$('<ul class="submenu"><div><img class="icono-ce" src="https://yoco.ws/clic-edita/img/icono-enlace.svg"></div><li><p><strong>Audio</strong></p></li></ul>'),c=$('<li><ul class="ce-options"></ul></li>');var r=$('<li class="ce-option"><p>Cambiar mediante URL...</p></li>').click(function(){$(document).trigger("AUDIO_URL_CHANGE_REQUEST",t)}),d=$('<li class="ce-option"><p>Subir audio...</p></li>').click(function(e){e.preventDefault();var a=t.attr("data-ce-audio"),i=t.closest("[data-ce-article]").attr("data-ce-article"),c=t.closest("[data-ce-category]").attr("data-ce-category");void 0!==i&&!1!==i&&void 0!==c&&!1!==c||($("form#ce-audio-container").removeAttr("data-ce-selected-article"),$("form#ce-audio-container").removeAttr("data-ce-selected-category")),$("form#ce-audio-container").attr("data-ce-selected-audio",a),$("form#ce-audio-container").attr("data-ce-selected-article",i),$("form#ce-audio-container").attr("data-ce-selected-category",c),$("form#ce-audio-container > input[type=file]").click()});c.children(".ce-options").append(r).append(d),i.append(c),e.append(i);break;case"data-ce-video":i=$('<ul class="submenu"><div><img class="icono-ce" src="https://yoco.ws/clic-edita/img/icono-enlace.svg"></div><li><p><strong>Video</strong></p></li></ul>'),c=$('<li><ul class="ce-options"></ul></li>');var l=$('<li class="ce-option"><p>Cambiar mediante URL...</p></li>').click(function(){$(document).trigger("VIDEO_URL_CHANGE_REQUEST",t)}),s=$('<li class="ce-option"><p>Subir video...</p></li>').click(function(e){e.preventDefault();var a=t.attr("data-ce-video"),i=t.closest("[data-ce-article]").attr("data-ce-article"),c=t.closest("[data-ce-category]").attr("data-ce-category");void 0!==i&&!1!==i&&void 0!==c&&!1!==c||($("form#ce-video-container").removeAttr("data-ce-selected-article"),$("form#ce-video-container").removeAttr("data-ce-selected-category")),$("form#ce-video-container").attr("data-ce-selected-video",a),$("form#ce-video-container").attr("data-ce-selected-article",i),$("form#ce-video-container").attr("data-ce-selected-category",c),$("form#ce-video-container > input[type=file]").click()}),u=$('<li class="ce-option" style="height:30px"><label data-ce-video-image data-ce-video-article="'+t.closest("[data-ce-article]").attr("data-ce-article")+'" data-ce-video-category="'+t.closest("[data-ce-category]").attr("data-ce-category")+'" data-subdirectory="video_images" for="ce-image"><p>Cambiar vista previa...</p></label><li>').click(function(){event.preventDefault();var e=$(this).children("label[data-ce-video-image]"),a=e.attr("data-subdirectory"),i=e.attr("data-ce-video-article"),c=e.attr("data-ce-video-category"),o=t.attr("data-ce-video");$("form#ce-image-video-container").attr("data-ce-selected-subdir",a),$("form#ce-image-video-container").attr("data-ce-selected-article",i),$("form#ce-image-video-container").attr("data-ce-selected-category",c),$("form#ce-image-video-container").attr("data-ce-selected-video",o),$("form#ce-image-video-container > input[type=file]").click()});c.children(".ce-options").append(l).append(s).append(u),i.append(c),e.append(i);break;case"data-ce-image":i=$('<ul class="submenu"><div><img class="icono-ce" src="https://yoco.ws/clic-edita/img/icono-imagen.svg"></div><li><p><strong>Imagen</strong></p></li></ul>'),c=$('<li><ul class="ce-options"></ul></li>');var g=$('<li class="ce-option"><p>Cambiar...</p></li>').click(function(){$(t).trigger("click")}),p=$('<li class="ce-option"><p>Describir...</p></li>').click(function(){$(document).trigger("IMAGE_ALT_CHANGE_REQUEST",t)});c.children(".ce-options").append(g).append(p),i.append(c),e.append(i);break;case"data-ce-article":i=$('<ul class="submenu"><div><img class="icono-ce" src="https://yoco.ws/clic-edita/img/icono-articulo.svg"></div><li><p><strong>Artículo</strong></p></li></ul>'),c=$('<li><ul class="ce-options"></ul></li>');t.find("a[data-ce-read-full]").length>0&&($read=$('<li class="ce-option"><a href='+t.find("a[data-ce-read-full]").attr("href")+"><p>Editar...</p></a></li>"),c.children(".ce-options").append($read));var m=$('<li class="inactive ce-option"><p>Publicar...</p></li>').click(function(){$(document).trigger("ARTICLE_PUBLISH_REQUEST",t)});if(c.children(".ce-options").append(m),t.closest("[data-ce-category][data-ce-single-article]").length){var f=$("<li><p><strong>Compartir</strong></p></li>"),v=$('<li><ul class="ce-options"></ul></li>'),E=$('<li class="ce-option" class="ce-option"><p>URL corta...</p></li>').click(function(){$(document).trigger("ARTICLE_FRIENDLYURL_CHANGE_REQUEST",t)}),y=$('<li class="ce-option"><p>Etiquetas...</p></li>').click(function(){$(document).trigger("ARTICLE_KEYWORD_CHANGE_REQUEST",t)}),h=$('<li class="ce-option" class="ce-option"><p>Título...</p></li>').click(function(){$(document).trigger("ARTICLE_SHARINGTITLE_CHANGE_REQUEST",t)}),_=$('<li class="ce-option"><p>Descripción...</p></li>').click(function(){$(document).trigger("ARTICLE_SHARINGDESC_CHANGE_REQUEST",t)}),A=$('<li class="ce-option" style="height:30px"><label data-ce-sharing-image data-ce-sharing-article="'+t.attr("data-ce-article")+'" data-ce-sharing-category="'+t.closest("[data-ce-category]").attr("data-ce-category")+'" data-subdirectory="sharing_images" for="ce-image"><p>Imagen...</p></label><li>').click(function(){event.preventDefault();var e=$(this).children("label[data-ce-sharing-image]"),t=e.attr("data-subdirectory"),a=e.attr("data-ce-sharing-article"),i=e.attr("data-ce-sharing-category");$("form#ce-image-sharing-container").attr("data-ce-selected-subdir",t),$("form#ce-image-sharing-container").attr("data-ce-selected-article",a),$("form#ce-image-sharing-container").attr("data-ce-selected-category",i),$("form#ce-image-sharing-container > input[type=file]").click()});v.children(".ce-options").append(E).append(y).append(h).append(_).append(A),f.append(v),c.children(".ce-options").append(f)}var C=$('<li class="inactive ce-option"><p>Subir...</p></li>'),b=$('<li class="inactive ce-option"><p>Bajar...</p></li>'),S=$('<li class="ce-option"><p>Eliminar...</p></li>').click(function(){$(document).trigger("ARTICLE_REMOVAL_REQUEST",t)});c.children(".ce-options").append(C).append(b).append(S),i.append(c),e.append(i)}}function triggerAnchorEdition(e){$(document).trigger("ANCHOR_CHANGE_REQUEST",$(e))}$(document).one("TEXT_CHANGE_REQUEST",function e(t,a,i){var c=$(a).attr("data-ce-text"),o=$("body").attr("data-ce-page"),n=$(a).html(),r=new TextComponent(c,o,n);i?r.getAdvancedEditor(a).then(function(t){$(document).one("TEXT_CHANGE_REQUEST",e),console.log("Elemento editado exitosamente:\n",t);var i=r.getValues(),c=new SenderComponent("aggregation","text",i,clicEdita.get("API_key"),clicEdita.get("domain"));if($(a).parents("[data-ce-article]").length&&$(a).parents("[data-ce-category]").length){var o=$(a).parents("[data-ce-article]").attr("data-ce-article"),n=$(a).parents("[data-ce-category]").attr("data-ce-category");c.set("category",n),c.set("article",o)}var d=c.getJSON();c.requestAggregation(d).then(function(e){console.log(e),$(a).parents("[data-ce-article]").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").remove(),clicEdita.notify(e,"success")},function(e){console.log(e),clicEdita.notify(e,"failure")})},function(t){$(document).one("TEXT_CHANGE_REQUEST",e),console.log("Failure",t),"Sin cambios"!==t&&clicEdita.notify(t,"failure")}):r.getSimpleEditor(a).then(function(t){$(document).one("TEXT_CHANGE_REQUEST",e),console.log("Elemento editado exitosamente:\n",t);var i=r.getValues(),c=new SenderComponent("aggregation","text",i,clicEdita.get("API_key"),clicEdita.get("domain"));if($(a).parents("[data-ce-article]").length&&$(a).parents("[data-ce-category]").length){var o=$(a).parents("[data-ce-article]").attr("data-ce-article"),n=$(a).parents("[data-ce-category]").attr("data-ce-category");c.set("category",n),c.set("article",o)}var d=c.getJSON();c.requestAggregation(d).then(function(e){console.log(e),$(a).parents("[data-ce-article]").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").remove(),clicEdita.notify(e,"success")},function(e){console.log(e),clicEdita.notify(e,"failure")})},function(t){$(document).one("TEXT_CHANGE_REQUEST",e),console.log("Failure",t),"Sin cambios"!==t&&clicEdita.notify(t,"failure")})}),$(document).one("AUDIO_URL_CHANGE_REQUEST",function e(t,a){var i=$(a).attr("data-ce-audio"),c=$("body").attr("data-ce-page"),o=$(a).find("source").attr("src"),n=new AudioComponent(i,c,o);n.getSimpleEditor(a).then(function(t){$(document).one("AUDIO_URL_CHANGE_REQUEST",e),console.log("Elemento editado exitosamente:\n",t);var c,o=n.getValues(),r=new SenderComponent("aggregation","audio",o,clicEdita.get("API_key"),clicEdita.get("domain"));if($(a).parents("[data-ce-article]").length&&$(a).parents("[data-ce-category]").length){var d=$(a).parents("[data-ce-article]").attr("data-ce-article"),l=$(a).parents("[data-ce-category]").attr("data-ce-category");r.set("category",l),r.set("article",d),c=!0}else c=!1;var s=r.getJSON();r.requestAggregation(s).then(function(e){console.log(e),c&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").remove(),c?$("[data-ce-article="+d+'] [data-ce-audio="'+i+'"] source').attr("src",o.src):$("[data-ce-audio="+i+"]  source").attr("src",o.src),clicEdita.notify(e,"success")},function(e){console.log(e),clicEdita.notify(e,"error")})},function(t){$(document).one("AUDIO_URL_CHANGE_REQUEST",e),console.log("Failure",t),clicEdita.notify(t,"error")})}),$(document).one("VIDEO_URL_CHANGE_REQUEST",function e(t,a){var i=$(a).attr("data-ce-video"),c=$("body").attr("data-ce-page"),o=$(a).find("source").attr("src"),n=new VideoComponent(i,c,o);n.getSimpleEditor(a).then(function(t){$(document).one("VIDEO_URL_CHANGE_REQUEST",e),console.log("Elemento editado exitosamente:\n",t);var c,o=n.getValues(),r=new SenderComponent("aggregation","video",o,clicEdita.get("API_key"),clicEdita.get("domain"));if($(a).parents("[data-ce-article]").length&&$(a).parents("[data-ce-category]").length){var d=$(a).parents("[data-ce-article]").attr("data-ce-article"),l=$(a).parents("[data-ce-category]").attr("data-ce-category");r.set("category",l),r.set("article",d),c=!0}else c=!1;var s=r.getJSON();r.requestAggregation(s).then(function(e){console.log(e),c&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").remove(),c?$("[data-ce-article="+d+'] [data-ce-video="'+i+'"] source').attr("src",o.src):$("[data-ce-video="+i+"]  source").attr("src",o.src),clicEdita.notify(e,"success")},function(e){console.log(e),clicEdita.notify(e,"error")})},function(t){$(document).one("VIDEO_URL_CHANGE_REQUEST",e),console.log("Failure",t),clicEdita.notify(t,"error")})}),$(document).one("AUDIO_UPLOAD_CHANGE_REQUEST",function e(t,a,i){console.log("seleccionado audio exitosamente");var c=$(a).attr("data-ce-selected-subdir");(new LocalStorageComponent).requestAudioAggregation(a,c).then(function(t){console.log(t.msg);var i=$(a).attr("data-ce-selected-audio"),c=$("body").attr("data-ce-page"),o=t.path,n=new AudioComponent(i,c,o).getValues(),r=new SenderComponent("aggregation","audio",n,clicEdita.get("API_key"),clicEdita.get("domain")),d=!1,l=$(a).attr("data-ce-selected-article"),s=$(a).attr("data-ce-selected-category");void 0!==l&&!1!==l&&(l=$(a).attr("data-ce-selected-article"),s=$(a).attr("data-ce-selected-category"),r.set("category",s),r.set("article",l),d=!0);var u=r.getJSON();r.requestAggregation(u).then(function(t){clicEdita.notify(t,"success"),console.log(t),d&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").remove(),d?$("[data-ce-article="+l+'] [data-ce-audio="'+i+'"] source').attr("src",o):$("[data-ce-audio="+i+"]  source").attr("src",o),$(document).one("AUDIO_UPLOAD_CHANGE_REQUEST",e)},function(t){console.log(t),clicEdita.notify(t,"failure"),$(document).one("AUDIO_UPLOAD_CHANGE_REQUEST",e)})},function(t){console.log(t),clicEdita.notify(t,"error"),$(document).one("AUDIO_UPLOAD_CHANGE_REQUEST",e)})}),$(document).one("VIDEO_UPLOAD_CHANGE_REQUEST",function e(t,a,i){console.log("seleccionado video exitosamente");var c=$(a).attr("data-ce-selected-subdir");(new LocalStorageComponent).requestVideoAggregation(a,c).then(function(t){console.log(t.msg);var i=$(a).attr("data-ce-selected-video"),c=$("body").attr("data-ce-page"),o=t.path,n=new VideoComponent(i,c,o).getValues(),r=new SenderComponent("aggregation","video",n,clicEdita.get("API_key"),clicEdita.get("domain")),d=!1,l=$(a).attr("data-ce-selected-article"),s=$(a).attr("data-ce-selected-category");void 0!==l&&!1!==l&&(l=$(a).attr("data-ce-selected-article"),s=$(a).attr("data-ce-selected-category"),r.set("category",s),r.set("article",l),d=!0);var u=r.getJSON();r.requestAggregation(u).then(function(t){clicEdita.notify(t,"success"),console.log(t),d&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").remove(),d?$("[data-ce-article="+l+'] [data-ce-video="'+i+'"] source').attr("src",o):$("[data-ce-video="+i+"]  source").attr("src",o),$(document).one("VIDEO_UPLOAD_CHANGE_REQUEST",e)},function(t){console.log(t),clicEdita.notify(t,"failure"),$(document).one("VIDEO_UPLOAD_CHANGE_REQUEST",e)})},function(t){console.log(t),clicEdita.notify(t,"error"),$(document).one("VIDEO_UPLOAD_CHANGE_REQUEST",e)})}),$(document).one("VIDEO_POSTER_CHANGE_REQUEST",function e(t,a,i){console.log("seleccionado video exitosamente");var c=$(a).attr("data-ce-selected-subdir");(new LocalStorageComponent).requestImageAggregation(a,c).then(function(t){console.log(t.msg);var i=$(a).attr("data-ce-selected-video"),c=$("body").attr("data-ce-page"),o=t.path,n=new VideoComponent(i,c,o);n.set("type","poster");var r=n.getValues(),d=new SenderComponent("aggregation","video",r,clicEdita.get("API_key"),clicEdita.get("domain")),l=!1,s=$(a).attr("data-ce-selected-article"),u=$(a).attr("data-ce-selected-category");void 0!==s&&!1!==s&&(s=$(a).attr("data-ce-selected-article"),u=$(a).attr("data-ce-selected-category"),d.set("category",u),d.set("article",s),l=!0);var g=d.getJSON();d.requestAggregation(g).then(function(t){clicEdita.notify(t,"success"),console.log(t),l&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").remove(),l?$("[data-ce-article="+s+'] [data-ce-video="'+i+'"]').attr("poster",o):$("[data-ce-video="+i+"]").attr("poster",o),$(document).one("VIDEO_POSTER_CHANGE_REQUEST",e)},function(t){console.log(t),clicEdita.notify(t,"failure"),$(document).one("VIDEO_POSTER_CHANGE_REQUEST",e)})},function(t){console.log(t),clicEdita.notify(t,"error"),$(document).one("VIDEO_POSTER_CHANGE_REQUEST",e)})}),$(document).one("IMAGE_CHANGE_REQUEST",function e(t,a,i){console.log("seleccionada imagen exitosamente");var c=$(a).attr("data-ce-selected-subdir");(new LocalStorageComponent).requestImageAggregation(a,c).then(function(t){console.log(t.msg);var i=$(a).attr("data-ce-selected-image"),c=$("body").attr("data-ce-page"),o=t.path,n=new ImageComponent(i,c,o).getValues(),r=new SenderComponent("aggregation","image",n,clicEdita.get("API_key"),clicEdita.get("domain")),d=!1,l=$(a).attr("data-ce-selected-article"),s=$(a).attr("data-ce-selected-category");void 0!==l&&!1!==l&&(l=$(a).attr("data-ce-selected-article"),s=$(a).attr("data-ce-selected-category"),r.set("category",s),r.set("article",l),d=!0);var u=r.getJSON();r.requestAggregation(u).then(function(t){clicEdita.notify(t,"success"),console.log(t),d&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").remove(),d?$("[data-ce-category="+s+"] [data-ce-article="+l+'] label[data-ce-image="'+i+'"] img').attr("src",o):$("label[data-ce-image="+i+"]  img").attr("src",o),$(document).one("IMAGE_CHANGE_REQUEST",e)},function(t){console.log(t),clicEdita.notify(t,"failure"),$(document).one("IMAGE_CHANGE_REQUEST",e)})},function(t){console.log(t),clicEdita.notify(t,"error"),$(document).one("IMAGE_CHANGE_REQUEST",e)})}),$(document).one("ANCHOR_CHANGE_REQUEST",function e(t,a){var i=$(a).attr("data-ce-anchor"),c=$("body").attr("data-ce-page"),o=$(a).attr("href"),n=new AnchorComponent(i,c,o);n.getSimpleEditor(a).then(function(t){$(document).one("ANCHOR_CHANGE_REQUEST",e),console.log("Elemento editado exitosamente:\n",t);var i=n.getValues(),c=new SenderComponent("aggregation","anchor",i,clicEdita.get("API_key"),clicEdita.get("domain"));if($(a).parents("[data-ce-article]").length&&$(a).parents("[data-ce-category]").length){var o=$(a).parents("[data-ce-article]").attr("data-ce-article"),r=$(a).parents("[data-ce-category]").attr("data-ce-category");c.set("category",r),c.set("article",o)}var d=c.getJSON();c.requestAggregation(d).then(function(e){console.log(e),clicEdita.notify(e,"success"),$(a).parents("[data-ce-article]").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").remove()},function(e){console.log(e),clicEdita.notify(e,"error")})},function(t){$(document).one("ANCHOR_CHANGE_REQUEST",e),console.log("Failure",t),clicEdita.notify(t,"error")})}),$(document).one("IMAGE_ALT_CHANGE_REQUEST",function e(t,a){var i=$(a).attr("data-ce-image"),c=$("body").attr("data-ce-page"),o=$(a).find("img").attr("alt");null!=o&&""!=o||(o="Sin descripción");var n=new ImageComponent(i,c,o);n.set("type","alt"),n.getSimpleEditor(a).then(function(t){$(document).one("IMAGE_ALT_CHANGE_REQUEST",e),console.log("Elemento editado exitosamente:\n",t);var i=n.getValues(),c=new SenderComponent("aggregation","image",i,clicEdita.get("API_key"),clicEdita.get("domain"));if($(a).parents("[data-ce-article]").length&&$(a).parents("[data-ce-category]").length){var o=$(a).parents("[data-ce-article]").attr("data-ce-article"),r=$(a).parents("[data-ce-category]").attr("data-ce-category");c.set("category",r),c.set("article",o)}var d=c.getJSON();c.requestAggregation(d).then(function(e){console.log(e),clicEdita.notify(e,"success"),$(a).parents("[data-ce-article]").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").length&&$(a).parents("[data-ce-article]").prev("span.first-ce-article").remove()},function(e){console.log(e),clicEdita.notify(e,"error")})},function(t){$(document).one("IMAGE_ALT_CHANGE_REQUEST",e),console.log("Failure",t),clicEdita.notify(t,"error")})}),$(document).one("ARTICLE_REMOVAL_REQUEST",function e(t,a){var i=$(a).attr("data-ce-article"),c=$(a).closest("[data-ce-category]").attr("data-ce-category"),o=new ArticleComponent(i,c).getValues(),n=new SenderComponent("removal","article",o,clicEdita.get("API_key"),clicEdita.get("domain"));n.set("category",c),n.set("article",i);var r=n.getJSON();n.requestAggregation(r).then(function(t){clicEdita.notify(t,"success"),console.log(t),$(a).remove(),$(document).one("ARTICLE_REMOVAL_REQUEST",e)},function(t){console.log(t),clicEdita.notify(t,"failure"),$(document).one("ARTICLE_REMOVAL_REQUEST",e)})}),$(document).one("ARTICLE_PUBLISH_REQUEST",function e(t,a){var i=$(a).attr("data-ce-article"),c=$(a).closest("[data-ce-category]").attr("data-ce-category"),o=new ArticleComponent(i,c);o.set("type","publish");var n=o.getValues(),r=new SenderComponent("aggregation","article",n,clicEdita.get("API_key"),clicEdita.get("domain"));r.set("category",c),r.set("article",i);var d=r.getJSON();r.requestAggregation(d).then(function(t){clicEdita.notify(t,"success"),console.log(t),location.reload(),$(document).one("ARTICLE_PUBLISH_REQUEST",e)},function(t){console.log(t),clicEdita.notify(t,"failure"),$(document).one("ARTICLE_PUBLISH_REQUEST",e)})}),$(document).one("ARTICLE_FRIENDLYURL_CHANGE_REQUEST",function e(t,a){var i=$(a).attr("data-ce-article"),c=$(a).closest("[data-ce-category]").attr("data-ce-category"),o=$("meta[data-ce-url]").attr("content");null!=o&&""!=o||(o="Escribe la url corta de este artículo");var n=new ArticleComponent(i,c);n.set("val",o),n.set("type","friendly_url"),n.getSimpleEditor(a).then(function(t){$(document).one("ARTICLE_FRIENDLYURL_CHANGE_REQUEST",e),console.log("Elemento editado exitosamente:\n",t);var a=n.getValues(),o=new SenderComponent("aggregation","article",a,clicEdita.get("API_key"),clicEdita.get("domain"));o.set("category",c),o.set("article",i);var r=o.getJSON();o.requestAggregation(r).then(function(e){console.log(e),clicEdita.notify(e,"success")},function(e){console.log(e),clicEdita.notify(e,"error")})},function(t){$(document).one("ARTICLE_FRIENDLYURL_CHANGE_REQUEST",e),console.log("Failure",t),clicEdita.notify(t,"error")})}),$(document).one("ARTICLE_KEYWORD_CHANGE_REQUEST",function e(t,a){var i=$(a).attr("data-ce-article"),c=$(a).closest("[data-ce-category]").attr("data-ce-category"),o=$("meta[name=keywords]").attr("content");null!=o&&""!=o||(o="Escribe las etiquetas que describen a este artículo");var n=new ArticleComponent(i,c);n.set("val",o),n.getSimpleEditor(a).then(function(t){$(document).one("ARTICLE_KEYWORD_CHANGE_REQUEST",e),console.log("Elemento editado exitosamente:\n",t);var a=n.getValues(),o=new SenderComponent("aggregation","article",a,clicEdita.get("API_key"),clicEdita.get("domain"));o.set("category",c),o.set("article",i);var r=o.getJSON();o.requestAggregation(r).then(function(e){console.log(e),clicEdita.notify(e,"success")},function(e){console.log(e),clicEdita.notify(e,"error")})},function(t){$(document).one("ARTICLE_KEYWORD_CHANGE_REQUEST",e),console.log("Failure",t),clicEdita.notify(t,"error")})}),$(document).one("ARTICLE_SHARINGTITLE_CHANGE_REQUEST",function e(t,a){var i=$(a).attr("data-ce-article"),c=$(a).closest("[data-ce-category]").attr("data-ce-category"),o=$('meta[property="og:title"]').attr("content");null!=o&&""!=o||(o="Escribe el título de este artículo");var n=new ArticleComponent(i,c);n.set("val",o),n.set("type","sharing_title"),n.getSimpleEditor(a).then(function(t){$(document).one("ARTICLE_SHARINGTITLE_CHANGE_REQUEST",e),console.log("Elemento editado exitosamente:\n",t);var a=n.getValues(),o=new SenderComponent("aggregation","article",a,clicEdita.get("API_key"),clicEdita.get("domain"));o.set("category",c),o.set("article",i);var r=o.getJSON();o.requestAggregation(r).then(function(e){console.log(e),clicEdita.notify(e,"success")},function(e){console.log(e),clicEdita.notify(e,"error")})},function(t){$(document).one("ARTICLE_SHARINGTITLE_CHANGE_REQUEST",e),console.log("Failure",t),clicEdita.notify(t,"error")})}),$(document).one("ARTICLE_SHARINGDESC_CHANGE_REQUEST",function e(t,a){var i=$(a).attr("data-ce-article"),c=$(a).closest("[data-ce-category]").attr("data-ce-category"),o=$('meta[property="og:description"]').attr("content");null!=o&&""!=o||(o="Describe este artículo");var n=new ArticleComponent(i,c);n.set("val",o),n.set("type","sharing_description"),n.getSimpleEditor(a).then(function(t){$(document).one("ARTICLE_SHARINGDESC_CHANGE_REQUEST",e),console.log("Elemento editado exitosamente:\n",t);var a=n.getValues(),o=new SenderComponent("aggregation","article",a,clicEdita.get("API_key"),clicEdita.get("domain"));o.set("category",c),o.set("article",i);var r=o.getJSON();o.requestAggregation(r).then(function(e){console.log(e),clicEdita.notify(e,"success")},function(e){console.log(e),clicEdita.notify(e,"error")})},function(t){$(document).one("ARTICLE_SHARINGDESC_CHANGE_REQUEST",e),console.log("Failure",t),clicEdita.notify(t,"error")})}),$(document).one("ARTICLE_SHARINGIMAGE_CHANGE_REQUEST",function e(t,a){var i=$(a).attr("data-ce-selected-subdir");(new LocalStorageComponent).requestImageAggregation(a,i).then(function(t){$(document).one("ARTICLE_SHARINGIMAGE_CHANGE_REQUEST",e),console.log(t.msg);var i=$(a).attr("data-ce-selected-article"),c=$(a).attr("data-ce-selected-category"),o=t.path,n=new ArticleComponent(i,c);n.set("val",o),n.set("type","sharing_image");var r=n.getValues(),d=new SenderComponent("aggregation","article",r,clicEdita.get("API_key"),clicEdita.get("domain"));d.set("category",c),d.set("article",i);var l=d.getJSON();d.requestAggregation(l).then(function(e){console.log(e),clicEdita.notify(e,"success")},function(e){console.log(e),clicEdita.notify(e,"error")})},function(t){console.log(t),clicEdita.notify(t,"error"),$(document).one("ARTICLE_SHARINGIMAGE_CHANGE_REQUEST",e)})});var ImageComponent=function(e,t,a){var i={id:e,pageId:t,val:a,type:"default"};return{get:function(e){if(i.hasOwnProperty(e))return i[e]},set:function(e,t){i.hasOwnProperty(e)&&(i[e]=t)},getSimpleEditor:function(e){return new Promise(function(t,a){$(e).addClass("ce-blur-content");var c=i.val;$("body").after('<div class="ce-alt-editor-container"><div class="ce-alt-editor clic-edita-editor hidden-clic-edita-editor"><div class="header-editor-clic-edita"><p>Descripción de la imagen</p></div><div class="cuerpo-editor-clic-edita"><img src="https://yoco.ws/clic-edita/img/editar-imagen.svg"><p data-ce-alt-editor contenteditable>'+c+"</p></div></div></div>"),setTimeout(function(){$("div.clic-edita-editor").removeClass("hidden-clic-edita-editor")},1),$(document).keydown(function(c){13!=c.keyCode||c.shiftKey?27==c.keyCode&&(a("Operacion anulada"),$(document).unbind("keydown"),$("p[data-ce-alt-editor]").unbind("focusout"),$("div.ce-alt-editor-container").remove(),$(e).removeClass("ce-blur-content"),$(e).attr("alt",i.val)):(i.val=$("p[data-ce-alt-editor]").html(),$(e).attr("alt",i.val),t("Tu input fue "+i.val),$(document).unbind("keydown"),$("p[data-ce-alt-editor]").unbind("focusout"),$("div.ce-alt-editor-container").remove(),$(e).removeClass("ce-blur-content"))}),$("p[data-ce-alt-editor]").focusout(function(a){i.val=$("p[data-ce-alt-editor]").html(),$(e).attr("alt",i.val),t("Tu input fue "+i.val),$(document).unbind("keydown"),$("p[data-ce-alt-editor]").unbind("focusout"),$("div.ce-alt-editor-container").remove(),$(e).removeClass("ce-blur-content")})})},getJSON:function(){return JSON.stringify(i)},getValues:function(){return i}}},LocalStorageComponent=function(e,t,a){return{requestImageAggregation:function(e,t){return $("body").after('<div class="ce-upload-progress"><progress value="0" max="100"></progress></div>'),new Promise(function(a,i){jQuery.ajax({type:"POST",url:clicEdita.get("LOCAL_MEDIA_HANDLER")+"?image=1&subdir="+t,data:new FormData(e),xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",upload_progress,!1),e},contentType:!1,processData:!1}).done(function(e){a(e),$("div.ce-upload-progress").remove()}).fail(function(e){i(e.responseJSON.msg),$("div.ce-upload-progress").remove()})})},requestAudioAggregation:function(e,t){return $("body").after('<div class="ce-upload-progress"><progress value="0" max="100"></progress></div>'),new Promise(function(a,i){jQuery.ajax({type:"POST",url:clicEdita.get("LOCAL_MEDIA_HANDLER")+"?audio=1&subdir="+t,data:new FormData(e),xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",upload_progress,!1),e},contentType:!1,processData:!1}).done(function(e){a(e),$("div.ce-upload-progress").remove()}).fail(function(e){i(e.responseJSON.msg),$("div.ce-upload-progress").remove()})})},requestVideoAggregation:function(e,t){return $("body").after('<div class="ce-upload-progress"><progress value="0" max="100"></progress></div>'),new Promise(function(a,i){jQuery.ajax({type:"POST",url:clicEdita.get("LOCAL_MEDIA_HANDLER")+"?video=1&subdir="+t,data:new FormData(e),xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",upload_progress,!1),e},contentType:!1,processData:!1}).done(function(e){a(e),$("div.ce-upload-progress").remove()}).fail(function(e){i(e.responseJSON.msg),$("div.ce-upload-progress").remove()})})}}};function upload_progress(e){e.lengthComputable&&$("progress").attr({value:e.loaded,max:e.total})}var SenderComponent=function(e,t,a,i,c){var o={operationType:e,dataType:t,elemValues:a,category:"none",article:"none",API_key:i,domain:c};return{get:function(e){if(o.hasOwnProperty(e))return o[e]},set:function(e,t){o.hasOwnProperty(e)&&(o[e]=t)},requestAggregation:function(e){return new Promise(function(t,a){jQuery.ajax({type:"POST",url:"https://yoco.ws/clic-edita/src/server/handler.php",dataType:"json",data:e}).done(function(e){t(e.msg)}).fail(function(e){a(e.responseJSON.msg)})})},requestRemoval:function(e){return new Promise(function(t,a){jQuery.ajax({type:"POST",url:"https://yoco.ws/clic-edita/src/server/handler.php",dataType:"json",data:e}).done(function(e){t(e.msg)}).fail(function(e){a(e.responseJSON.msg)})})},getJSON:function(){return JSON.stringify(o)}}},TextComponent=function(e,t,a){var i={id:e,pageId:t,val:a,type:"default"};return{get:function(e){if(i.hasOwnProperty(e))return i[e]},set:function(e,t){i.hasOwnProperty(e)&&(i[e]=t)},getSimpleEditor:function(e){return new Promise(function(t,a){$(e).focusout(function(c){i.val!==$(e).html()?(i.val=$(e).html(),t("Tu input fue "+i.val)):a("Sin cambios"),$(e).unbind("keydown"),$(e).unbind("focusout"),$(e).attr("contenteditable",!1),$(e).attr("contenteditable",!0)}),$(e).keydown(function(t){if(27==t.keyCode&&(a("Operacion anulada"),$(e).unbind("keydown"),$(e).unbind("focusout"),$(e).html(i.val)),13===t.keyCode)return document.execCommand("insertHTML",!1,"<br><br>"),!1})})},getAdvancedEditor:function(e){$(e).addClass("medium-editor");var t=new MediumEditor(".medium-editor",{toolbar:{buttons:["bold","italic","underline",{name:"anchor",aria:"enlace",contentDefault:'<img class="icon-btn-ce-editor" src="https://yoco.ws/clic-edita/img/editar-enlace.svg">'},"justifyLeft","justifyCenter","justifyRight","removeFormat","html"]},paste:{forcePlainText:!0,cleanPastedHTML:!1},extensions:{paste:{}}});return new Promise(function(a,c){$(e).focusout(function(e){$(".medium-editor-toolbar:hover").length||$(document).trigger("EXIT_TEXT_EDITOR")}),$(document).on("EXIT_TEXT_EDITOR",function(){if($(e).is(":focus"))return alert("something still focused"),!1;i.val!==$(e).html()?(i.val=$(e).html(),a("Tu input fue "+i.val)):c("Sin cambios"),t.destroy(),$(e).unbind("keydown"),$(e).unbind("focusout"),$(document).unbind("EXIT_TEXT_EDITOR"),$(e).attr("contenteditable",!1),$(e).attr("contenteditable",!0)}),$(e).keydown(function(t){if(27==t.keyCode&&(c("Operacion anulada"),$(e).unbind("keydown"),$(e).unbind("focusout"),$(e).html(i.val)),13===t.keyCode)return document.execCommand("insertHTML",!1,"<br><br>"),!1})})},getJSON:function(){return JSON.stringify(i)},getValues:function(){return i}}},VideoComponent=function(e,t,a){var i={id:e,pageId:t,val:a,type:"default"};return{get:function(e){if(i.hasOwnProperty(e))return i[e]},set:function(e,t){i.hasOwnProperty(e)&&(i[e]=t)},getSimpleEditor:function(e){return new Promise(function(t,a){$(e).addClass("ce-blur-content");var c=i.val;$("body").after('<div class="ce-alt-editor-container"><div class="ce-alt-editor clic-edita-editor hidden-clic-edita-editor"><div class="header-editor-clic-edita"><p>URL del video</p></div><div class="cuerpo-editor-clic-edita"><img src="https://yoco.ws/clic-edita/img/editar-imagen.svg"><p data-ce-alt-editor contenteditable>'+c+"</p></div></div></div>"),setTimeout(function(){$("div.clic-edita-editor").removeClass("hidden-clic-edita-editor")},1),$(document).keydown(function(c){13!=c.keyCode||c.shiftKey?27==c.keyCode&&(a("Operacion anulada"),$(document).unbind("keydown"),$("p[data-ce-alt-editor]").unbind("focusout"),$("div.ce-alt-editor-container").remove(),$(e).removeClass("ce-blur-content"),$(e).find("source").attr("src",i.val)):(i.val=$("p[data-ce-alt-editor]").html(),$(e).find("source").attr("src",i.val),t("Tu input fue "+i.val),$(document).unbind("keydown"),$("p[data-ce-alt-editor]").unbind("focusout"),$("div.ce-alt-editor-container").remove(),$(e).removeClass("ce-blur-content"))}),$("p[data-ce-alt-editor]").focusout(function(a){i.val=$("p[data-ce-alt-editor]").html(),$(e).find("source").attr("src",i.val),t("Tu input fue "+i.val),$(document).unbind("keydown"),$("p[data-ce-alt-editor]").unbind("focusout"),$("div.ce-alt-editor-container").remove(),$(e).removeClass("ce-blur-content")})})},getJSON:function(){return JSON.stringify(i)},getValues:function(){return i}}},AnchorComponent=function(e,t,a){var i={id:e,pageId:t,val:a,type:"default"};return{get:function(e){if(i.hasOwnProperty(e))return i[e]},set:function(e,t){i.hasOwnProperty(e)&&(i[e]=t)},getSimpleEditor:function(e){return new Promise(function(t,a){$(e).addClass("ce-blur-content");var c=i.val;$("body").after('<div class="ce-anchor-editor-container"><div class="ce-anchor-editor clic-edita-editor hidden-clic-edita-editor"><div class="header-editor-clic-edita"><p>URL del enlace</p></div><div class="cuerpo-editor-clic-edita"><img src="https://yoco.ws/clic-edita/img/editar-enlace.svg"><p data-ce-anchor-editor contenteditable>'+c+"</p></div></div></div>"),setTimeout(function(){$("div.clic-edita-editor").removeClass("hidden-clic-edita-editor")},1),$(document).keydown(function(c){13!=c.keyCode||c.shiftKey?27==c.keyCode&&(a("Operacion anulada"),$("p[data-ce-anchor-editor]").unbind("focusout"),$(document).unbind("keydown"),$("div.ce-anchor-editor-container").remove(),$(e).removeClass("ce-blur-content"),$(e).attr("href",i.val)):(i.val=$("p[data-ce-anchor-editor]").html(),$(e).attr("href",i.val),t("Tu input fue "+i.val),$("p[data-ce-anchor-editor]").unbind("focusout"),$(document).unbind("keydown"),$("div.ce-anchor-editor-container").remove(),$(e).removeClass("ce-blur-content"))}),$("p[data-ce-anchor-editor]").focusout(function(a){i.val=$("p[data-ce-anchor-editor]").html(),$(e).attr("href",i.val),t("Tu input fue "+i.val),$("p[data-ce-anchor-editor]").unbind("focusout"),$(document).unbind("keydown"),$("div.ce-anchor-editor-container").remove(),$(e).removeClass("ce-blur-content")})})},getJSON:function(){return JSON.stringify(i)},getValues:function(){return i}}},ArticleComponent=function(e,t){var a={id:e,categoryId:t,val:"default",type:"default"};return{get:function(e){if(a.hasOwnProperty(e))return a[e]},set:function(e,t){a.hasOwnProperty(e)&&(a[e]=t)},getSimpleEditor:function(e){return new Promise(function(t,i){$(e).addClass("ce-blur-content");var c=a.val;$("body").after('<div class="ce-keywords-editor-container"><div class="ce-keywords-editor clic-edita-editor hidden-clic-edita-editor"><div class="header-editor-clic-edita"><p>'+{sharing_title:"Título del artículo",sharing_description:"Descripción del artículo",default:"Palabras clave del artículo",sharing_image:"Imágen para compartir del artículo",friendly_url:"URL corta del artículo"}[a.type]+'</p></div><div class="cuerpo-editor-clic-edita"><img src="https://yoco.ws/clic-edita/img/editar-articulo.svg"><p data-ce-keywords-editor contenteditable>'+c+"</p></div></div></div>"),setTimeout(function(){$("div.clic-edita-editor").removeClass("hidden-clic-edita-editor")},1),$(document).keydown(function(c){13!=c.keyCode||c.shiftKey?27==c.keyCode&&(i("Operacion anulada"),$("p[data-ce-keywords-editor]").unbind("focusout"),$(document).unbind("keydown"),$("div.ce-keywords-editor-container").remove(),$(e).removeClass("ce-blur-content")):(a.val=$("p[data-ce-keywords-editor]").html(),t("Tu input fue "+a.val),$("p[data-ce-keywords-editor]").unbind("focusout"),$(document).unbind("keydown"),$("div.ce-keywords-editor-container").remove(),$(e).removeClass("ce-blur-content"))}),$("p[data-ce-keywords-editor]").focusout(function(i){a.val=$("p[data-ce-keywords-editor]").html(),t("Tu input fue "+a.val),$("p[data-ce-keywords-editor]").unbind("focusout"),$(document).unbind("keydown"),$("div.ce-keywords-editor-container").remove(),$(e).removeClass("ce-blur-content")})})},getJSON:function(){return JSON.stringify(a)},getValues:function(){return a}}},AudioComponent=function(e,t,a){var i={id:e,pageId:t,val:a,type:"default"};return{get:function(e){if(i.hasOwnProperty(e))return i[e]},set:function(e,t){i.hasOwnProperty(e)&&(i[e]=t)},getSimpleEditor:function(e){return new Promise(function(t,a){$(e).addClass("ce-blur-content");var c=i.val;$("body").after('<div class="ce-alt-editor-container"><div class="ce-alt-editor clic-edita-editor hidden-clic-edita-editor"><div class="header-editor-clic-edita"><p>URL del audio</p></div><div class="cuerpo-editor-clic-edita"><img src="https://yoco.ws/clic-edita/img/editar-imagen.svg"><p data-ce-alt-editor contenteditable>'+c+"</p></div></div></div>"),setTimeout(function(){$("div.clic-edita-editor").removeClass("hidden-clic-edita-editor")},1),$(document).keydown(function(c){13!=c.keyCode||c.shiftKey?27==c.keyCode&&(a("Operacion anulada"),$(document).unbind("keydown"),$("p[data-ce-alt-editor]").unbind("focusout"),$("div.ce-alt-editor-container").remove(),$(e).removeClass("ce-blur-content"),$(e).find("source").attr("src",i.val)):(i.val=$("p[data-ce-alt-editor]").html(),$(e).find("source").attr("src",i.val),t("Tu input fue "+i.val),$(document).unbind("keydown"),$("p[data-ce-alt-editor]").unbind("focusout"),$("div.ce-alt-editor-container").remove(),$(e).removeClass("ce-blur-content"))}),$("p[data-ce-alt-editor]").focusout(function(a){i.val=$("p[data-ce-alt-editor]").html(),$(e).find("source").attr("src",i.val),t("Tu input fue "+i.val),$(document).unbind("keydown"),$("p[data-ce-alt-editor]").unbind("focusout"),$("div.ce-alt-editor-container").remove(),$(e).removeClass("ce-blur-content")})})},getJSON:function(){return JSON.stringify(i)},getValues:function(){return i}}};